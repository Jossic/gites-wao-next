{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jossi\\\\Dropbox\\\\JOSSIC\\\\6-development\\\\Devs\\\\gites-wao\\\\frontend\\\\components\\\\admin\\\\forms\\\\reservation\\\\FormStatus.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport { Button, CircularProgress, FormControl, Grid, InputLabel, MenuItem, Select, Snackbar, TextareaAutosize, TextField, Typography } from '@material-ui/core';\nimport { withRouter } from 'next/router';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport MuiAlert from '@material-ui/lab/Alert';\nimport { useState } from 'react';\nimport { useForm, Controller } from 'react-hook-form';\nimport { updateReservation } from '../../../../actions/reservationActions';\nimport { getCookie } from '../../../../actions/authActions';\nimport DateFnsUtils from '@date-io/date-fns';\nimport { MuiPickersUtilsProvider, KeyboardTimePicker, KeyboardDatePicker } from '@material-ui/pickers';\n\nfunction Alert(props) {\n  return __jsx(MuiAlert, _extends({\n    elevation: 6,\n    variant: \"filled\"\n  }, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 9\n    }\n  }));\n}\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: '100%'\n  },\n  button: {\n    marginRight: theme.spacing(1),\n    marginTop: theme.spacing(2)\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: '100%'\n  },\n  textField: {\n    margin: theme.spacing(1),\n    width: '25ch'\n  }\n}));\n\nconst FormStatus = ({\n  preloadedValues,\n  generateContract\n}) => {\n  const [selectedDateRes, setSelectedDateRes] = React.useState();\n  const [selectedDateContrat, setSelectedDateContrat] = React.useState();\n  console.log(preloadedValues.dateContrat);\n\n  const handleDateChangeRes = date => {\n    setSelectedDateRes(date);\n  };\n\n  const handleDateChangeContrat = date => {\n    setSelectedDateContrat(date);\n  };\n\n  const token = getCookie('token');\n  const classes = useStyles();\n  const {\n    control,\n    register,\n    handleSubmit\n  } = useForm({\n    defaultValues: preloadedValues\n  });\n  const {\n    0: values,\n    1: setValues\n  } = useState({\n    loading: false,\n    success: '',\n    error: '',\n    message: ''\n  });\n  const {\n    success,\n    loading,\n    error,\n    message\n  } = values;\n\n  const onSubmit = async data => {\n    console.log(data);\n    setValues(_objectSpread(_objectSpread({}, values), {}, {\n      loading: true\n    }));\n    updateReservation(data, router.query.id, token).then(result => {\n      if (result.error) {\n        setValues(_objectSpread(_objectSpread({}, values), {}, {\n          error: result.error\n        }));\n      } else {\n        setValues(_objectSpread(_objectSpread({}, values), {}, {\n          success: true,\n          loading: false,\n          message: result.message\n        })); // setTimeout(() => {\n        // \tRouter.push('/admin/gestionDivers/partenaires');\n        // }, 3000);\n      }\n    });\n  };\n\n  return __jsx(React.Fragment, null, loading && __jsx(CircularProgress, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 16\n    }\n  }), success && __jsx(Snackbar, {\n    open: open,\n    autoHideDuration: 6000,\n    onClose: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }\n  }, __jsx(Alert, {\n    onClose: handleClose,\n    severity: \"success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 6\n    }\n  }, message)), error && __jsx(Snackbar, {\n    open: open,\n    autoHideDuration: 6000,\n    onClose: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 5\n    }\n  }, __jsx(Alert, {\n    onClose: handleClose,\n    severity: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 6\n    }\n  }, error)), __jsx(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 4\n    }\n  }, __jsx(Grid, {\n    container: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 5\n    }\n  }, __jsx(FormControl, {\n    className: classes.formControl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 6\n    }\n  }, __jsx(MuiPickersUtilsProvider, {\n    utils: DateFnsUtils,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }\n  }, __jsx(KeyboardDatePicker, {\n    inputRef: register,\n    disableToolbar: true,\n    variant: \"inline\",\n    name: \"dateRes\",\n    format: \"MM/dd/yyyy\",\n    margin: \"normal\",\n    id: \"date-picker-inline\",\n    label: \"Date de r\\xE9servation\",\n    value: selectedDateRes,\n    onChange: handleDateChangeRes,\n    KeyboardButtonProps: {\n      'aria-label': 'change date'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 8\n    }\n  }))), __jsx(FormControl, {\n    className: classes.formControl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 6\n    }\n  }, __jsx(InputLabel, {\n    shrink: true,\n    id: \"demo-simple-select-placeholder-label-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }\n  }, \"Status de la r\\xE9servation\"), __jsx(Controller, {\n    control: control,\n    name: \"status\",\n    as: __jsx(Select, {\n      id: \"status-select\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }\n    }, __jsx(MenuItem, {\n      value: \"Nouvelle r\\xE9servation\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 10\n      }\n    }, \"Nouvelle r\\xE9servation\"), __jsx(MenuItem, {\n      value: \"Contrat envoy\\xE9\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 10\n      }\n    }, \"Contrat envoy\\xE9\"), __jsx(MenuItem, {\n      value: \"Acompte/Contrat re\\xE7u\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 10\n      }\n    }, \"Acompte/Contrat re\\xE7u\"), __jsx(MenuItem, {\n      value: \"Relance contrat non re\\xE7u\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 10\n      }\n    }, \"Relance contrat non re\\xE7u\"), __jsx(MenuItem, {\n      value: \"Reservation termin\\xE9e\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 10\n      }\n    }, \"Reservation termin\\xE9e\"), __jsx(MenuItem, {\n      value: \"Reservation/Contrat annul\\xE9e\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 10\n      }\n    }, \"Reservation/Contrat annul\\xE9e\")),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }\n  })), __jsx(FormControl, {\n    className: classes.formControl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 6\n    }\n  }, __jsx(TextField, {\n    inputRef: register,\n    name: \"infoCompl\",\n    id: \"standard-number\",\n    label: \"Message du locataire\",\n    multiline: true,\n    rows: 3,\n    InputLabelProps: {\n      shrink: true\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }\n  })), __jsx(FormControl, {\n    className: classes.formControl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 6\n    }\n  }, __jsx(TextField, {\n    inputRef: register,\n    name: \"commentaire\",\n    id: \"standard-number\",\n    label: \"Note sp\\xE9cifique\",\n    multiline: true,\n    rows: 2,\n    InputLabelProps: {\n      shrink: true\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 7\n    }\n  })), preloadedValues.dateContrat ? __jsx(FormControl, {\n    className: classes.formControl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 7\n    }\n  }, __jsx(MuiPickersUtilsProvider, {\n    utils: DateFnsUtils,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 8\n    }\n  }, __jsx(KeyboardDatePicker, {\n    inputRef: register,\n    disableToolbar: true,\n    variant: \"inline\",\n    name: \"dateContrat\",\n    disabled: true,\n    format: \"dd/MM/yyyy\",\n    margin: \"normal\",\n    id: \"date-picker-inline\",\n    label: \"Date de g\\xE9n\\xE9ration du contrat\",\n    value: selectedDateContrat,\n    onChange: handleDateChangeContrat,\n    KeyboardButtonProps: {\n      'aria-label': 'change date'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 9\n    }\n  }))) : __jsx(Button, {\n    onClick: generateContract,\n    variant: \"contained\",\n    color: \"secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 7\n    }\n  }, \"G\\xE9n\\xE9rer le contrat\")), __jsx(Button, {\n    type: \"submit\",\n    variant: \"contained\",\n    color: \"primary\",\n    style: {\n      width: '100%'\n    },\n    className: classes.button,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 5\n    }\n  }, \"Valider les modifications\")));\n};\n\nexport default withRouter(FormStatus);","map":{"version":3,"sources":["C:/Users/jossi/Dropbox/JOSSIC/6-development/Devs/gites-wao/frontend/components/admin/forms/reservation/FormStatus.js"],"names":["Button","CircularProgress","FormControl","Grid","InputLabel","MenuItem","Select","Snackbar","TextareaAutosize","TextField","Typography","withRouter","makeStyles","withStyles","MuiAlert","useState","useForm","Controller","updateReservation","getCookie","DateFnsUtils","MuiPickersUtilsProvider","KeyboardTimePicker","KeyboardDatePicker","Alert","props","useStyles","theme","root","width","button","marginRight","spacing","marginTop","formControl","margin","minWidth","textField","FormStatus","preloadedValues","generateContract","selectedDateRes","setSelectedDateRes","React","selectedDateContrat","setSelectedDateContrat","console","log","dateContrat","handleDateChangeRes","date","handleDateChangeContrat","token","classes","control","register","handleSubmit","defaultValues","values","setValues","loading","success","error","message","onSubmit","data","router","query","id","then","result","open","handleClose","shrink"],"mappings":"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","sourcesContent":["import {\r\n\tButton,\r\n\tCircularProgress,\r\n\tFormControl,\r\n\tGrid,\r\n\tInputLabel,\r\n\tMenuItem,\r\n\tSelect,\r\n\tSnackbar,\r\n\tTextareaAutosize,\r\n\tTextField,\r\n\tTypography,\r\n} from '@material-ui/core';\r\nimport { withRouter } from 'next/router';\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\r\nimport MuiAlert from '@material-ui/lab/Alert';\r\nimport { useState } from 'react';\r\nimport { useForm, Controller } from 'react-hook-form';\r\nimport { updateReservation } from '../../../../actions/reservationActions';\r\nimport { getCookie } from '../../../../actions/authActions';\r\n\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport {\r\n\tMuiPickersUtilsProvider,\r\n\tKeyboardTimePicker,\r\n\tKeyboardDatePicker,\r\n} from '@material-ui/pickers';\r\n\r\nfunction Alert(props) {\r\n\treturn <MuiAlert elevation={6} variant='filled' {...props} />;\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%',\r\n\t},\r\n\tbutton: {\r\n\t\tmarginRight: theme.spacing(1),\r\n\t\tmarginTop: theme.spacing(2),\r\n\t},\r\n\tformControl: {\r\n\t\tmargin: theme.spacing(1),\r\n\t\tminWidth: '100%',\r\n\t},\r\n\ttextField: {\r\n\t\tmargin: theme.spacing(1),\r\n\t\twidth: '25ch',\r\n\t},\r\n}));\r\n\r\nconst FormStatus = ({ preloadedValues, generateContract }) => {\r\n\tconst [selectedDateRes, setSelectedDateRes] = React.useState();\r\n\tconst [selectedDateContrat, setSelectedDateContrat] = React.useState();\r\n\tconsole.log(preloadedValues.dateContrat);\r\n\tconst handleDateChangeRes = (date) => {\r\n\t\tsetSelectedDateRes(date);\r\n\t};\r\n\r\n\tconst handleDateChangeContrat = (date) => {\r\n\t\tsetSelectedDateContrat(date);\r\n\t};\r\n\tconst token = getCookie('token');\r\n\tconst classes = useStyles();\r\n\tconst { control, register, handleSubmit } = useForm({\r\n\t\tdefaultValues: preloadedValues,\r\n\t});\r\n\r\n\tconst [values, setValues] = useState({\r\n\t\tloading: false,\r\n\t\tsuccess: '',\r\n\t\terror: '',\r\n\t\tmessage: '',\r\n\t});\r\n\tconst { success, loading, error, message } = values;\r\n\r\n\tconst onSubmit = async (data) => {\r\n\t\tconsole.log(data);\r\n\t\tsetValues({ ...values, loading: true });\r\n\t\tupdateReservation(data, router.query.id, token).then((result) => {\r\n\t\t\tif (result.error) {\r\n\t\t\t\tsetValues({ ...values, error: result.error });\r\n\t\t\t} else {\r\n\t\t\t\tsetValues({\r\n\t\t\t\t\t...values,\r\n\t\t\t\t\tsuccess: true,\r\n\t\t\t\t\tloading: false,\r\n\t\t\t\t\tmessage: result.message,\r\n\t\t\t\t});\r\n\t\t\t\t// setTimeout(() => {\r\n\t\t\t\t// \tRouter.push('/admin/gestionDivers/partenaires');\r\n\t\t\t\t// }, 3000);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{loading && <CircularProgress />}\r\n\t\t\t{success && (\r\n\t\t\t\t<Snackbar\r\n\t\t\t\t\topen={open}\r\n\t\t\t\t\tautoHideDuration={6000}\r\n\t\t\t\t\tonClose={handleClose}>\r\n\t\t\t\t\t<Alert onClose={handleClose} severity='success'>\r\n\t\t\t\t\t\t{message}\r\n\t\t\t\t\t</Alert>\r\n\t\t\t\t</Snackbar>\r\n\t\t\t)}\r\n\t\t\t{error && (\r\n\t\t\t\t<Snackbar\r\n\t\t\t\t\topen={open}\r\n\t\t\t\t\tautoHideDuration={6000}\r\n\t\t\t\t\tonClose={handleClose}>\r\n\t\t\t\t\t<Alert onClose={handleClose} severity='error'>\r\n\t\t\t\t\t\t{error}\r\n\t\t\t\t\t</Alert>\r\n\t\t\t\t</Snackbar>\r\n\t\t\t)}\r\n\t\t\t<form onSubmit={handleSubmit(onSubmit)}>\r\n\t\t\t\t<Grid container>\r\n\t\t\t\t\t<FormControl className={classes.formControl}>\r\n\t\t\t\t\t\t<MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n\t\t\t\t\t\t\t<KeyboardDatePicker\r\n\t\t\t\t\t\t\t\tinputRef={register}\r\n\t\t\t\t\t\t\t\tdisableToolbar\r\n\t\t\t\t\t\t\t\tvariant='inline'\r\n\t\t\t\t\t\t\t\tname='dateRes'\r\n\t\t\t\t\t\t\t\tformat='MM/dd/yyyy'\r\n\t\t\t\t\t\t\t\tmargin='normal'\r\n\t\t\t\t\t\t\t\tid='date-picker-inline'\r\n\t\t\t\t\t\t\t\tlabel='Date de réservation'\r\n\t\t\t\t\t\t\t\tvalue={selectedDateRes}\r\n\t\t\t\t\t\t\t\tonChange={handleDateChangeRes}\r\n\t\t\t\t\t\t\t\tKeyboardButtonProps={{\r\n\t\t\t\t\t\t\t\t\t'aria-label': 'change date',\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</MuiPickersUtilsProvider>\r\n\t\t\t\t\t</FormControl>\r\n\r\n\t\t\t\t\t<FormControl className={classes.formControl}>\r\n\t\t\t\t\t\t<InputLabel\r\n\t\t\t\t\t\t\tshrink\r\n\t\t\t\t\t\t\tid='demo-simple-select-placeholder-label-label'>\r\n\t\t\t\t\t\t\tStatus de la réservation\r\n\t\t\t\t\t\t</InputLabel>\r\n\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\tname='status'\r\n\t\t\t\t\t\t\tas={\r\n\t\t\t\t\t\t\t\t<Select id='status-select'>\r\n\t\t\t\t\t\t\t\t\t<MenuItem value='Nouvelle réservation'>\r\n\t\t\t\t\t\t\t\t\t\tNouvelle réservation\r\n\t\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t\t<MenuItem value='Contrat envoyé'>\r\n\t\t\t\t\t\t\t\t\t\tContrat envoyé\r\n\t\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t\t<MenuItem value='Acompte/Contrat reçu'>\r\n\t\t\t\t\t\t\t\t\t\tAcompte/Contrat reçu\r\n\t\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t\t<MenuItem value='Relance contrat non reçu'>\r\n\t\t\t\t\t\t\t\t\t\tRelance contrat non reçu\r\n\t\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t\t<MenuItem value='Reservation terminée'>\r\n\t\t\t\t\t\t\t\t\t\tReservation terminée\r\n\t\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t\t<MenuItem value='Reservation/Contrat annulée'>\r\n\t\t\t\t\t\t\t\t\t\tReservation/Contrat annulée\r\n\t\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</FormControl>\r\n\r\n\t\t\t\t\t<FormControl className={classes.formControl}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tinputRef={register}\r\n\t\t\t\t\t\t\tname='infoCompl'\r\n\t\t\t\t\t\t\tid='standard-number'\r\n\t\t\t\t\t\t\tlabel='Message du locataire'\r\n\t\t\t\t\t\t\tmultiline\r\n\t\t\t\t\t\t\trows={3}\r\n\t\t\t\t\t\t\tInputLabelProps={{\r\n\t\t\t\t\t\t\t\tshrink: true,\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</FormControl>\r\n\r\n\t\t\t\t\t<FormControl className={classes.formControl}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tinputRef={register}\r\n\t\t\t\t\t\t\tname='commentaire'\r\n\t\t\t\t\t\t\tid='standard-number'\r\n\t\t\t\t\t\t\tlabel='Note spécifique'\r\n\t\t\t\t\t\t\tmultiline\r\n\t\t\t\t\t\t\trows={2}\r\n\t\t\t\t\t\t\tInputLabelProps={{\r\n\t\t\t\t\t\t\t\tshrink: true,\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</FormControl>\r\n\r\n\t\t\t\t\t{preloadedValues.dateContrat ? (\r\n\t\t\t\t\t\t<FormControl className={classes.formControl}>\r\n\t\t\t\t\t\t\t<MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n\t\t\t\t\t\t\t\t<KeyboardDatePicker\r\n\t\t\t\t\t\t\t\t\tinputRef={register}\r\n\t\t\t\t\t\t\t\t\tdisableToolbar\r\n\t\t\t\t\t\t\t\t\tvariant='inline'\r\n\t\t\t\t\t\t\t\t\tname='dateContrat'\r\n\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\tformat='dd/MM/yyyy'\r\n\t\t\t\t\t\t\t\t\tmargin='normal'\r\n\t\t\t\t\t\t\t\t\tid='date-picker-inline'\r\n\t\t\t\t\t\t\t\t\tlabel='Date de génération du contrat'\r\n\t\t\t\t\t\t\t\t\tvalue={selectedDateContrat}\r\n\t\t\t\t\t\t\t\t\tonChange={handleDateChangeContrat}\r\n\t\t\t\t\t\t\t\t\tKeyboardButtonProps={{\r\n\t\t\t\t\t\t\t\t\t\t'aria-label': 'change date',\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</MuiPickersUtilsProvider>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tonClick={generateContract}\r\n\t\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\t\tcolor='secondary'>\r\n\t\t\t\t\t\t\tGénérer le contrat\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Grid>\r\n\r\n\t\t\t\t<Button\r\n\t\t\t\t\ttype='submit'\r\n\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\tstyle={{ width: '100%' }}\r\n\t\t\t\t\tclassName={classes.button}>\r\n\t\t\t\t\tValider les modifications\r\n\t\t\t\t</Button>\r\n\t\t\t</form>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default withRouter(FormStatus);\r\n"]},"metadata":{},"sourceType":"module"}