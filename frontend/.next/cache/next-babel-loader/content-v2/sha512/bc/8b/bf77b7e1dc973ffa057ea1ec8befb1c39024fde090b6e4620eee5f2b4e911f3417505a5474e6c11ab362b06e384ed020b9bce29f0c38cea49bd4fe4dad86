{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jossi\\\\Dropbox\\\\JOSSIC\\\\6-development\\\\Devs\\\\gites-wao\\\\frontend\\\\components\\\\admin\\\\lists\\\\ListGites.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { Table } from 'reactstrap';\nimport { deleteGite, listeDesGites } from '../../../actions/giteActions';\nimport { useEffect, useState } from 'react';\nimport { API } from '../../../config';\nimport MUIDataTable from 'mui-datatables';\nimport { withRouter } from 'next/router';\nimport WidgetsIcon from '@material-ui/icons/Widgets';\nimport { IconButton } from '@material-ui/core';\nimport { withSnackbar } from '../../HOC/Snackbar';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\nimport { Alert, Spinner } from 'reactstrap';\nimport Link from 'next/link';\nimport { getCookie } from '../../../actions/authActions';\n\nvar ListGites = function ListGites(_ref) {\n  _s();\n\n  var gites = _ref.gites,\n      router = _ref.router,\n      snackbarShowMessage = _ref.snackbarShowMessage;\n  var token = getCookie('token');\n\n  var _useState = useState(false),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var removeGite = function removeGite(slug) {\n    setLoading(true);\n    deleteGite(slug, token).then(function (data) {\n      if (data.error) {\n        setLoading(false);\n        snackbarShowMessage(\"\".concat(data.error));\n      } else {\n        setLoading(false);\n        snackbarShowMessage(\"\".concat(data.text), 'success');\n        setTimeout(function () {\n          router.reload();\n        }, 3000);\n      }\n    });\n  };\n\n  var deleteConfirm = function deleteConfirm(slug) {\n    if (true) {\n      var answer = window.confirm(\"Vous \\xEAtes sur le point de supprimer le g\\xEEte \".concat(slug, \", \\xEAtes-vous s\\xFBr ?\"));\n\n      if (answer) {\n        removeGite(slug);\n      }\n    }\n  };\n\n  var columns = [{\n    name: '_id',\n    label: '#',\n    options: {\n      filter: true,\n      sort: true // display: false,\n\n    }\n  }, {\n    name: 'name',\n    label: 'Nom',\n    options: {\n      filter: true,\n      sort: true\n    }\n  }, {\n    name: 'email',\n    label: 'Email',\n    options: {\n      filter: true,\n      sort: false\n    }\n  }, {\n    name: 'avatar',\n    label: 'Avatar',\n    options: {\n      filter: true,\n      sort: false,\n      customBodyRender: function customBodyRender(value, tableMeta, updateValue) {\n        console.log(value);\n        return __jsx(Image, {\n          src: value,\n          alt: \"Avatar\",\n          width: 75,\n          height: 75,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 7\n          }\n        });\n      }\n    }\n  }, {\n    name: 'isAdmin',\n    label: 'Admin',\n    options: {\n      filter: true,\n      customBodyRender: function customBodyRender(value, tableMeta, updateValue) {\n        return value ? __jsx(CheckBoxIcon, {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 7\n          }\n        }) : __jsx(CheckBoxOutlineBlankIcon, {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 7\n          }\n        });\n      }\n    }\n  }, {\n    name: 'Consulter',\n    options: {\n      sort: false,\n      filter: false,\n      customBodyRender: function customBodyRender(value, tableMeta, updateValue) {\n        // console.log(tableMeta.rowData);\n        return __jsx(IconButton, {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 7\n          }\n        }, __jsx(Link, {\n          href: \"/admin/users/\".concat(tableMeta.rowData[0]),\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 8\n          }\n        }, __jsx(\"a\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 9\n          }\n        }, __jsx(WidgetsIcon, {\n          fontSize: \"large\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 10\n          }\n        }))));\n      }\n    }\n  }, {\n    name: 'Suppr',\n    options: {\n      customBodyRender: function customBodyRender(value, tableMeta, updateValue) {\n        // console.log(tableMeta.rowData);\n        return __jsx(IconButton, {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 7\n          }\n        }, __jsx(DeleteForeverIcon, {\n          style: {\n            fontSize: '30px',\n            color: 'red'\n          },\n          onClick: function onClick() {\n            return deleteConfirm(tableMeta.rowData[0]);\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 8\n          }\n        }));\n      }\n    }\n  }];\n  var options = {\n    filterType: 'checkbox',\n    selectableRows: 'none'\n  };\n  return __jsx(React.Fragment, null, loading && __jsx(CircularProgress, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 16\n    }\n  }), __jsx(Table, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 4\n    }\n  }, __jsx(\"thead\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 5\n    }\n  }, __jsx(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 6\n    }\n  }, __jsx(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }\n  }, \"#\"), __jsx(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }\n  }, \"Nom\"), __jsx(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }\n  }, \"Vignette\"), __jsx(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }\n  }, \"Capacit\\xE9\"), __jsx(\"th\", {\n    colSpan: \"2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }\n  }, \"Actions\"))), __jsx(\"tbody\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 5\n    }\n  }, gites.map(function (gite) {\n    return __jsx(\"tr\", {\n      style: {\n        backgroundColor: gite.couleur1\n      },\n      className: \"mt-5\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 7\n      }\n    }, __jsx(\"th\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 8\n      }\n    }, gite._id), __jsx(\"th\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 8\n      }\n    }, gite.nom), __jsx(\"th\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 8\n      }\n    }, __jsx(\"img\", {\n      src: \"\".concat(API, \"/gite/photo/\").concat(gite.slug),\n      style: {\n        maxHeight: 'auto',\n        width: '100%'\n      },\n      className: \"img img-fluid\",\n      alt: gite.nom,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 9\n      }\n    })), __jsx(\"th\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 8\n      }\n    }, gite.capacite), __jsx(\"th\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 8\n      }\n    }, __jsx(Link, {\n      href: \"/admin/crud/gite/\".concat(gite.slug),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }\n    }, __jsx(\"a\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 10\n      }\n    }, __jsx(\"i\", {\n      className: \"fas fa-pencil-ruler\",\n      style: {\n        color: 'orange'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 11\n      }\n    })))), __jsx(\"th\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 8\n      }\n    }, __jsx(\"i\", {\n      onClick: function onClick() {\n        return deleteConfirm(gite.slug);\n      },\n      className: \"fas fa-trash-alt\",\n      style: {\n        color: 'red',\n        cursor: 'pointer'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }\n    })));\n  }))));\n};\n\n_s(ListGites, \"/Rjh5rPqCCqf0XYnTUk9ZNavw3Q=\");\n\n_c = ListGites;\nexport default _c3 = withRouter(_c2 = withSnackbar(ListGites));\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"ListGites\");\n$RefreshReg$(_c2, \"%default%$withRouter\");\n$RefreshReg$(_c3, \"%default%\");","map":{"version":3,"sources":["C:/Users/jossi/Dropbox/JOSSIC/6-development/Devs/gites-wao/frontend/components/admin/lists/ListGites.js"],"names":["Table","deleteGite","listeDesGites","useEffect","useState","API","MUIDataTable","withRouter","WidgetsIcon","IconButton","withSnackbar","CircularProgress","CheckBoxIcon","CheckBoxOutlineBlankIcon","DeleteForeverIcon","Alert","Spinner","Link","getCookie","ListGites","gites","router","snackbarShowMessage","token","loading","setLoading","removeGite","slug","then","data","error","text","setTimeout","reload","deleteConfirm","answer","window","confirm","columns","name","label","options","filter","sort","customBodyRender","value","tableMeta","updateValue","console","log","rowData","fontSize","color","filterType","selectableRows","map","gite","backgroundColor","couleur1","_id","nom","maxHeight","width","capacite","cursor"],"mappings":"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","sourcesContent":["import { Table } from 'reactstrap';\r\nimport { deleteGite, listeDesGites } from '../../../actions/giteActions';\r\nimport { useEffect, useState } from 'react';\r\nimport { API } from '../../../config';\r\nimport MUIDataTable from 'mui-datatables';\r\nimport { withRouter } from 'next/router';\r\nimport WidgetsIcon from '@material-ui/icons/Widgets';\r\nimport { IconButton } from '@material-ui/core';\r\nimport { withSnackbar } from '../../HOC/Snackbar';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\r\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport { Alert, Spinner } from 'reactstrap';\r\nimport Link from 'next/link';\r\nimport { getCookie } from '../../../actions/authActions';\r\n\r\nconst ListGites = ({ gites, router, snackbarShowMessage }) => {\r\n\tconst token = getCookie('token');\r\n\r\n\tconst [loading, setLoading] = useState(false);\r\n\r\n\tconst removeGite = (slug) => {\r\n\t\tsetLoading(true);\r\n\t\tdeleteGite(slug, token).then((data) => {\r\n\t\t\tif (data.error) {\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t\tsnackbarShowMessage(`${data.error}`);\r\n\t\t\t} else {\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t\tsnackbarShowMessage(`${data.text}`, 'success');\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\trouter.reload();\r\n\t\t\t\t}, 3000);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tconst deleteConfirm = (slug) => {\r\n\t\tif (typeof window !== 'undefined') {\r\n\t\t\tlet answer = window.confirm(\r\n\t\t\t\t`Vous êtes sur le point de supprimer le gîte ${slug}, êtes-vous sûr ?`\r\n\t\t\t);\r\n\t\t\tif (answer) {\r\n\t\t\t\tremoveGite(slug);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\tname: '_id',\r\n\t\t\tlabel: '#',\r\n\t\t\toptions: {\r\n\t\t\t\tfilter: true,\r\n\t\t\t\tsort: true,\r\n\t\t\t\t// display: false,\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'name',\r\n\t\t\tlabel: 'Nom',\r\n\t\t\toptions: {\r\n\t\t\t\tfilter: true,\r\n\t\t\t\tsort: true,\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'email',\r\n\t\t\tlabel: 'Email',\r\n\t\t\toptions: {\r\n\t\t\t\tfilter: true,\r\n\t\t\t\tsort: false,\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t{\r\n\t\t\tname: 'avatar',\r\n\t\t\tlabel: 'Avatar',\r\n\t\t\toptions: {\r\n\t\t\t\tfilter: true,\r\n\t\t\t\tsort: false,\r\n\t\t\t\tcustomBodyRender: (value, tableMeta, updateValue) => {\r\n\t\t\t\t\tconsole.log(value);\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Image\r\n\t\t\t\t\t\t\tsrc={value}\r\n\t\t\t\t\t\t\talt='Avatar'\r\n\t\t\t\t\t\t\twidth={75}\r\n\t\t\t\t\t\t\theight={75}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'isAdmin',\r\n\t\t\tlabel: 'Admin',\r\n\t\t\toptions: {\r\n\t\t\t\tfilter: true,\r\n\t\t\t\tcustomBodyRender: (value, tableMeta, updateValue) => {\r\n\t\t\t\t\treturn value ? (\r\n\t\t\t\t\t\t<CheckBoxIcon />\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<CheckBoxOutlineBlankIcon />\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'Consulter',\r\n\t\t\toptions: {\r\n\t\t\t\tsort: false,\r\n\t\t\t\tfilter: false,\r\n\t\t\t\tcustomBodyRender: (value, tableMeta, updateValue) => {\r\n\t\t\t\t\t// console.log(tableMeta.rowData);\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<IconButton>\r\n\t\t\t\t\t\t\t<Link href={`/admin/users/${tableMeta.rowData[0]}`}>\r\n\t\t\t\t\t\t\t\t<a>\r\n\t\t\t\t\t\t\t\t\t<WidgetsIcon fontSize='large' />\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'Suppr',\r\n\t\t\toptions: {\r\n\t\t\t\tcustomBodyRender: (value, tableMeta, updateValue) => {\r\n\t\t\t\t\t// console.log(tableMeta.rowData);\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<IconButton>\r\n\t\t\t\t\t\t\t<DeleteForeverIcon\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tfontSize: '30px',\r\n\t\t\t\t\t\t\t\t\tcolor: 'red',\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\tdeleteConfirm(tableMeta.rowData[0])\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t];\r\n\r\n\tconst options = {\r\n\t\tfilterType: 'checkbox',\r\n\t\tselectableRows: 'none',\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{loading && <CircularProgress />}\r\n\r\n\t\t\t<Table>\r\n\t\t\t\t<thead>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>#</th>\r\n\t\t\t\t\t\t<th>Nom</th>\r\n\t\t\t\t\t\t<th>Vignette</th>\r\n\t\t\t\t\t\t<th>Capacité</th>\r\n\t\t\t\t\t\t<th colSpan='2'>Actions</th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t{gites.map((gite) => (\r\n\t\t\t\t\t\t<tr\r\n\t\t\t\t\t\t\tstyle={{ backgroundColor: gite.couleur1 }}\r\n\t\t\t\t\t\t\tclassName='mt-5'>\r\n\t\t\t\t\t\t\t<th>{gite._id}</th>\r\n\t\t\t\t\t\t\t<th>{gite.nom}</th>\r\n\t\t\t\t\t\t\t<th>\r\n\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\tsrc={`${API}/gite/photo/${gite.slug}`}\r\n\t\t\t\t\t\t\t\t\tstyle={{ maxHeight: 'auto', width: '100%' }}\r\n\t\t\t\t\t\t\t\t\tclassName='img img-fluid'\r\n\t\t\t\t\t\t\t\t\talt={gite.nom}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t<th>{gite.capacite}</th>\r\n\t\t\t\t\t\t\t<th>\r\n\t\t\t\t\t\t\t\t<Link href={`/admin/crud/gite/${gite.slug}`}>\r\n\t\t\t\t\t\t\t\t\t<a>\r\n\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='fas fa-pencil-ruler'\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ color: 'orange' }}></i>\r\n\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t<th>\r\n\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\tonClick={() => deleteConfirm(gite.slug)}\r\n\t\t\t\t\t\t\t\t\tclassName='fas fa-trash-alt'\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tcolor: 'red',\r\n\t\t\t\t\t\t\t\t\t\tcursor: 'pointer',\r\n\t\t\t\t\t\t\t\t\t}}></i>\r\n\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</tbody>\r\n\t\t\t</Table>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default withRouter(withSnackbar(ListGites));\r\n"]},"metadata":{},"sourceType":"module"}