{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jossi\\\\Dropbox\\\\JOSSIC\\\\6-development\\\\Devs\\\\gites-wao\\\\frontend\\\\components\\\\admin\\\\forms\\\\FormUpdateMailer.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { Button, CircularProgress, FormControl, InputLabel, MenuItem, Select, Switch, FormControlLabel, TextField, Grid, ListSubheader, ButtonGroup } from '@material-ui/core';\nimport dynamic from 'next/dynamic';\nconst ReactQuill = dynamic(() => import('react-quill'), {\n  ssr: false,\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak('react-quill')],\n    modules: ['react-quill']\n  }\n});\nimport { QuillModules, QuillFormats } from '../../../util/quill';\nimport { withRouter } from 'next/router';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useState } from 'react';\nimport { useForm, Controller } from 'react-hook-form';\nimport { getCookie } from '../../../actions/authActions';\nimport { updateMailer } from '../../../actions/mailerActions';\nimport Router from 'next/router';\nimport { withSnackbar } from '../../HOC/Snackbar';\nconst useStyles = makeStyles(theme => ({\n  button: {\n    marginRight: theme.spacing(1),\n    marginTop: theme.spacing(2),\n    width: '100%'\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    width: '80%'\n  },\n  textField: {\n    margin: theme.spacing(1),\n    width: '80%'\n  }\n}));\n\nconst FormUpdateMailer = ({\n  snackbarShowMessage,\n  preloadedValues,\n  router\n}) => {\n  const token = getCookie('token');\n  const classes = useStyles();\n  const {\n    control,\n    register,\n    handleSubmit\n  } = useForm({\n    defaultValues: preloadedValues\n  });\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n\n  const onSubmit = async data => {\n    console.log(data);\n    setLoading(true);\n    updateMailer(data, router.query.id, token).then(result => {\n      console.log('result', result);\n\n      if (result.error) {\n        setLoading(false);\n        snackbarShowMessage(`${result.error}`);\n      } else {\n        setLoading(false);\n        snackbarShowMessage(`${result.message}`, 'success');\n        setTimeout(() => {\n          Router.push('/admin/mailer', null, {\n            shallow: true\n          });\n        }, 3000);\n      }\n    });\n  };\n\n  return __jsx(React.Fragment, null, loading && __jsx(CircularProgress, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 16\n    }\n  }), __jsx(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 4\n    }\n  }, __jsx(TextField, {\n    className: classes.textField,\n    inputRef: register,\n    name: \"nom\",\n    id: \"standard-number\",\n    label: \"Nom\",\n    InputLabelProps: {\n      shrink: true\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }\n  }), __jsx(TextField, {\n    className: classes.textField,\n    inputRef: register,\n    name: \"description\",\n    id: \"standard-number\",\n    label: \"Description\",\n    InputLabelProps: {\n      shrink: true\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 5\n    }\n  }), __jsx(TextField, {\n    className: classes.textField,\n    inputRef: register,\n    name: \"sujet\",\n    id: \"standard-number\",\n    label: \"Sujet\",\n    InputLabelProps: {\n      shrink: true\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 5\n    }\n  }), __jsx(FormControl, {\n    className: classes.formControl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 5\n    }\n  }, __jsx(InputLabel, {\n    shrink: true,\n    id: \"demo-simple-select-placeholder-label-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 6\n    }\n  }, \"\\\"Corps du mail - Pour ajouter une variable, il faut l'ajouter dans les balises suivantes : $\", \"Liste des variables disponibles : client, reservation, gite\", __jsx(Grid, {\n    container: true,\n    style: {\n      margin: '10px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }\n  }, __jsx(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 8\n    }\n  }, \"client.nom\"), __jsx(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 8\n    }\n  }, \"client.firstname\"), __jsx(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 8\n    }\n  }, \"client.address\"), __jsx(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 8\n    }\n  }, \"client.zip\"), __jsx(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 8\n    }\n  }, \"client.city\"), __jsx(Button, {\n    variant: \"contained\",\n    color: \"default\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 8\n    }\n  }, \"booking.arrival\"), __jsx(Button, {\n    variant: \"contained\",\n    color: \"default\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 8\n    }\n  }, \"booking.end\"))), __jsx(Controller, {\n    style: {\n      paddingTop: '40px',\n      minHeight: '300px'\n    },\n    as: ReactQuill,\n    control: control,\n    name: \"corps\",\n    theme: \"snow\",\n    placeholder: \"Corps du mail ici...\",\n    modules: QuillModules,\n    formats: QuillFormats,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 6\n    }\n  })), __jsx(FormControl, {\n    className: classes.formControl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 5\n    }\n  }, __jsx(InputLabel, {\n    shrink: true,\n    id: \"demo-simple-select-placeholder-label-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 6\n    }\n  }, \"D\\xE9clencheur\"), __jsx(Controller, {\n    control: control,\n    name: \"declencheur\",\n    as: __jsx(Select, {\n      id: \"declencheur-select\",\n      defaultValue: \"Envoi manuel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 8\n      }\n    }, __jsx(ListSubheader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }\n    }, \"Manuel\"), __jsx(MenuItem, {\n      value: \"Envoi manuel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }\n    }, \"Envoi manuel\"), __jsx(ListSubheader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }\n    }, \"Date\"), __jsx(MenuItem, {\n      value: \"7 jours avant arriv\\xE9e\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }\n    }, \"7 jours avant arriv\\xE9e\"), __jsx(MenuItem, {\n      value: \"7 jours apr\\xE8s le d\\xE9part\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 9\n      }\n    }, \"7 jours apr\\xE8s le d\\xE9part\"), __jsx(ListSubheader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }\n    }, \"Action\"), __jsx(MenuItem, {\n      value: \"\\xE0 la validation du contrat\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }\n    }, \"\\xE0 la validation du contrat\"), __jsx(MenuItem, {\n      value: \"Autre exemple\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }\n    }, \"Autre exemple\")),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 6\n    }\n  })), __jsx(Grid, {\n    container: true,\n    direction: \"row\",\n    justify: \"center\",\n    alignItems: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 5\n    }\n  }, __jsx(FormControlLabel, {\n    control: __jsx(Switch, {\n      inputRef: register,\n      name: \"actif\",\n      color: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 8\n      }\n    }),\n    label: \"Actif\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 6\n    }\n  })), __jsx(Button, {\n    type: \"submit\",\n    variant: \"contained\",\n    color: \"primary\",\n    className: classes.button,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 5\n    }\n  }, \"Modifier ce mailer\")));\n};\n\nexport default withRouter(withSnackbar(FormUpdateMailer));","map":{"version":3,"sources":["C:/Users/jossi/Dropbox/JOSSIC/6-development/Devs/gites-wao/frontend/components/admin/forms/FormUpdateMailer.js"],"names":["Button","CircularProgress","FormControl","InputLabel","MenuItem","Select","Switch","FormControlLabel","TextField","Grid","ListSubheader","ButtonGroup","dynamic","ReactQuill","ssr","QuillModules","QuillFormats","withRouter","makeStyles","useState","useForm","Controller","getCookie","updateMailer","Router","withSnackbar","useStyles","theme","button","marginRight","spacing","marginTop","width","formControl","margin","textField","FormUpdateMailer","snackbarShowMessage","preloadedValues","router","token","classes","control","register","handleSubmit","defaultValues","loading","setLoading","onSubmit","data","console","log","query","id","then","result","error","message","setTimeout","push","shallow","shrink","paddingTop","minHeight"],"mappings":"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","sourcesContent":["import {\r\n\tButton,\r\n\tCircularProgress,\r\n\tFormControl,\r\n\tInputLabel,\r\n\tMenuItem,\r\n\tSelect,\r\n\tSwitch,\r\n\tFormControlLabel,\r\n\tTextField,\r\n\tGrid,\r\n\tListSubheader,\r\n\tButtonGroup,\r\n} from '@material-ui/core';\r\nimport dynamic from 'next/dynamic';\r\nconst ReactQuill = dynamic(() => import('react-quill'), { ssr: false });\r\nimport { QuillModules, QuillFormats } from '../../../util/quill';\r\nimport { withRouter } from 'next/router';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useState } from 'react';\r\nimport { useForm, Controller } from 'react-hook-form';\r\nimport { getCookie } from '../../../actions/authActions';\r\nimport { updateMailer } from '../../../actions/mailerActions';\r\nimport Router from 'next/router';\r\nimport { withSnackbar } from '../../HOC/Snackbar';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tbutton: {\r\n\t\tmarginRight: theme.spacing(1),\r\n\t\tmarginTop: theme.spacing(2),\r\n\t\twidth: '100%',\r\n\t},\r\n\tformControl: {\r\n\t\tmargin: theme.spacing(1),\r\n\t\twidth: '80%',\r\n\t},\r\n\ttextField: {\r\n\t\tmargin: theme.spacing(1),\r\n\t\twidth: '80%',\r\n\t},\r\n}));\r\n\r\nconst FormUpdateMailer = ({ snackbarShowMessage, preloadedValues, router }) => {\r\n\tconst token = getCookie('token');\r\n\tconst classes = useStyles();\r\n\tconst { control, register, handleSubmit } = useForm({\r\n\t\tdefaultValues: preloadedValues,\r\n\t});\r\n\r\n\tconst [loading, setLoading] = useState(false);\r\n\r\n\tconst onSubmit = async (data) => {\r\n\t\tconsole.log(data);\r\n\t\tsetLoading(true);\r\n\t\tupdateMailer(data, router.query.id, token).then((result) => {\r\n\t\t\tconsole.log('result', result);\r\n\t\t\tif (result.error) {\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t\tsnackbarShowMessage(`${result.error}`);\r\n\t\t\t} else {\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t\tsnackbarShowMessage(`${result.message}`, 'success');\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tRouter.push('/admin/mailer', null, { shallow: true });\r\n\t\t\t\t}, 3000);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{loading && <CircularProgress />}\r\n\r\n\t\t\t<form onSubmit={handleSubmit(onSubmit)}>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tclassName={classes.textField}\r\n\t\t\t\t\tinputRef={register}\r\n\t\t\t\t\tname='nom'\r\n\t\t\t\t\tid='standard-number'\r\n\t\t\t\t\tlabel='Nom'\r\n\t\t\t\t\tInputLabelProps={{\r\n\t\t\t\t\t\tshrink: true,\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tclassName={classes.textField}\r\n\t\t\t\t\tinputRef={register}\r\n\t\t\t\t\tname='description'\r\n\t\t\t\t\tid='standard-number'\r\n\t\t\t\t\tlabel='Description'\r\n\t\t\t\t\tInputLabelProps={{\r\n\t\t\t\t\t\tshrink: true,\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tclassName={classes.textField}\r\n\t\t\t\t\tinputRef={register}\r\n\t\t\t\t\tname='sujet'\r\n\t\t\t\t\tid='standard-number'\r\n\t\t\t\t\tlabel='Sujet'\r\n\t\t\t\t\tInputLabelProps={{\r\n\t\t\t\t\t\tshrink: true,\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<FormControl className={classes.formControl}>\r\n\t\t\t\t\t<InputLabel\r\n\t\t\t\t\t\tshrink\r\n\t\t\t\t\t\tid='demo-simple-select-placeholder-label-label'>\r\n\t\t\t\t\t\t\"Corps du mail - Pour ajouter une variable, il faut\r\n\t\t\t\t\t\tl'ajouter dans les balises suivantes : ${}\r\n\t\t\t\t\t\tListe des variables disponibles : client, reservation,\r\n\t\t\t\t\t\tgite\r\n\t\t\t\t\t\t<Grid container style={{ margin: '10px' }}>\r\n\t\t\t\t\t\t\t<Button variant='contained' color='primary'>\r\n\t\t\t\t\t\t\t\tclient.nom\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<Button variant='contained' color='primary'>\r\n\t\t\t\t\t\t\t\tclient.firstname\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<Button variant='contained' color='primary'>\r\n\t\t\t\t\t\t\t\tclient.address\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<Button variant='contained' color='primary'>\r\n\t\t\t\t\t\t\t\tclient.zip\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<Button variant='contained' color='primary'>\r\n\t\t\t\t\t\t\t\tclient.city\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<Button variant='contained' color='default'>\r\n\t\t\t\t\t\t\t\tbooking.arrival\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<Button variant='contained' color='default'>\r\n\t\t\t\t\t\t\t\tbooking.end\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</InputLabel>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tstyle={{ paddingTop: '40px', minHeight: '300px' }}\r\n\t\t\t\t\t\tas={ReactQuill}\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\tname='corps'\r\n\t\t\t\t\t\ttheme='snow'\r\n\t\t\t\t\t\tplaceholder='Corps du mail ici...'\r\n\t\t\t\t\t\tmodules={QuillModules}\r\n\t\t\t\t\t\tformats={QuillFormats}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormControl>\r\n\r\n\t\t\t\t<FormControl className={classes.formControl}>\r\n\t\t\t\t\t<InputLabel\r\n\t\t\t\t\t\tshrink\r\n\t\t\t\t\t\tid='demo-simple-select-placeholder-label-label'>\r\n\t\t\t\t\t\tDéclencheur\r\n\t\t\t\t\t</InputLabel>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\tname='declencheur'\r\n\t\t\t\t\t\tas={\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tid='declencheur-select'\r\n\t\t\t\t\t\t\t\tdefaultValue='Envoi manuel'>\r\n\t\t\t\t\t\t\t\t<ListSubheader>Manuel</ListSubheader>\r\n\t\t\t\t\t\t\t\t<MenuItem value='Envoi manuel'>\r\n\t\t\t\t\t\t\t\t\tEnvoi manuel\r\n\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t<ListSubheader>Date</ListSubheader>\r\n\t\t\t\t\t\t\t\t<MenuItem value='7 jours avant arrivée'>\r\n\t\t\t\t\t\t\t\t\t7 jours avant arrivée\r\n\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t<MenuItem value='7 jours après le départ'>\r\n\t\t\t\t\t\t\t\t\t7 jours après le départ\r\n\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t<ListSubheader>Action</ListSubheader>\r\n\t\t\t\t\t\t\t\t<MenuItem value='à la validation du contrat'>\r\n\t\t\t\t\t\t\t\t\tà la validation du contrat\r\n\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t<MenuItem value='Autre exemple'>\r\n\t\t\t\t\t\t\t\t\tAutre exemple\r\n\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormControl>\r\n\r\n\t\t\t\t<Grid\r\n\t\t\t\t\tcontainer\r\n\t\t\t\t\tdirection='row'\r\n\t\t\t\t\tjustify='center'\r\n\t\t\t\t\talignItems='center'>\r\n\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\tcontrol={\r\n\t\t\t\t\t\t\t<Switch\r\n\t\t\t\t\t\t\t\tinputRef={register}\r\n\t\t\t\t\t\t\t\tname='actif'\r\n\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlabel='Actif'\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Button\r\n\t\t\t\t\ttype='submit'\r\n\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\tclassName={classes.button}>\r\n\t\t\t\t\tModifier ce mailer\r\n\t\t\t\t</Button>\r\n\t\t\t</form>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default withRouter(withSnackbar(FormUpdateMailer));\r\n"]},"metadata":{},"sourceType":"module"}