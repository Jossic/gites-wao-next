{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\jossi\\\\Dropbox\\\\JOSSIC\\\\6-development\\\\Devs\\\\gites-wao\\\\frontend\\\\components\\\\admin\\\\forms\\\\FormUpdateUser.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Button, CircularProgress, Switch, FormControlLabel, TextField, Grid } from '@material-ui/core';\nimport { withRouter } from 'next/router';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { getCookie } from '../../../actions/authActions';\nimport Router from 'next/router';\nimport { withSnackbar } from '../../HOC/Snackbar';\nimport { updateUser } from '../../../actions/userActions';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    button: {\n      marginRight: theme.spacing(1),\n      marginTop: theme.spacing(2),\n      width: '100%'\n    },\n    formControl: {\n      margin: theme.spacing(1),\n      width: '80%'\n    },\n    textField: {\n      margin: theme.spacing(1),\n      width: '80%'\n    }\n  };\n});\n\nvar FormCreateUser = function FormCreateUser(_ref) {\n  _s();\n\n  var snackbarShowMessage = _ref.snackbarShowMessage,\n      router = _ref.router,\n      user = _ref.user;\n  var token = getCookie('token');\n  var classes = useStyles();\n\n  var _useForm = useForm({\n    defaultValues: _objectSpread(_objectSpread({}, user), {}, {\n      password: ''\n    })\n  }),\n      register = _useForm.register,\n      handleSubmit = _useForm.handleSubmit;\n\n  var _useState = useState(false),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(data) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              console.log(data);\n              setLoading(true);\n              updateUser(data, token).then(function (result) {\n                console.log('result', result);\n\n                if (result.error) {\n                  setLoading(false);\n                  snackbarShowMessage(\"\".concat(result.error));\n                } else {\n                  setLoading(false);\n                  snackbarShowMessage(\"\".concat(result.message), 'success');\n                  setTimeout(function () {\n                    Router.push(\"/admin/users/\".concat(router.query.id), null, {\n                      shallow: true\n                    });\n                  }, 3000);\n                }\n              });\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onSubmit(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(React.Fragment, null, loading && __jsx(CircularProgress, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 16\n    }\n  }), __jsx(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 4\n    }\n  }, __jsx(TextField, {\n    className: classes.textField,\n    inputRef: register,\n    name: \"name\",\n    id: \"standard-number\",\n    label: \"Nom\",\n    InputLabelProps: {\n      shrink: true\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 5\n    }\n  }), __jsx(TextField, {\n    className: classes.textField,\n    inputRef: register,\n    name: \"email\",\n    type: \"mail\",\n    id: \"standard-number\",\n    label: \"Mail\",\n    InputLabelProps: {\n      shrink: true\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }\n  }), __jsx(TextField, {\n    className: classes.textField,\n    inputRef: register,\n    name: \"password\",\n    type: \"password\",\n    id: \"standard-number\",\n    label: \"Mot de passe\",\n    InputLabelProps: {\n      shrink: true\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 5\n    }\n  }), __jsx(Grid, {\n    container: true,\n    direction: \"row\",\n    justify: \"center\",\n    alignItems: \"center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 5\n    }\n  }, __jsx(FormControlLabel, {\n    control: __jsx(Switch, {\n      inputRef: register,\n      name: \"isAdmin\",\n      defaultChecked: true,\n      color: \"primary\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 8\n      }\n    }),\n    label: \"Admin\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 6\n    }\n  })), __jsx(Button, {\n    type: \"submit\",\n    variant: \"contained\",\n    color: \"primary\",\n    className: classes.button,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 5\n    }\n  }, \"Modifier cet utilisateur\")));\n};\n\n_s(FormCreateUser, \"c4DIMrXnHQLcMVhm41ACupA/Y/E=\", false, function () {\n  return [useStyles, useForm];\n});\n\n_c = FormCreateUser;\nexport default _c3 = withRouter(_c2 = withSnackbar(FormCreateUser));\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"FormCreateUser\");\n$RefreshReg$(_c2, \"%default%$withRouter\");\n$RefreshReg$(_c3, \"%default%\");","map":{"version":3,"sources":["C:/Users/jossi/Dropbox/JOSSIC/6-development/Devs/gites-wao/frontend/components/admin/forms/FormUpdateUser.js"],"names":["Button","CircularProgress","Switch","FormControlLabel","TextField","Grid","withRouter","makeStyles","useState","useForm","getCookie","Router","withSnackbar","updateUser","useStyles","theme","button","marginRight","spacing","marginTop","width","formControl","margin","textField","FormCreateUser","snackbarShowMessage","router","user","token","classes","defaultValues","password","register","handleSubmit","loading","setLoading","onSubmit","data","console","log","then","result","error","message","setTimeout","push","query","id","shallow","shrink"],"mappings":";;;;;;;;;;;;;;;AAAA,SACCA,MADD,EAECC,gBAFD,EAGCC,MAHD,EAICC,gBAJD,EAKCC,SALD,EAMCC,IAND,QAOO,mBAPP;AAQA,SAASC,UAAT,QAA2B,aAA3B;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,SAASC,QAAT,QAAyB,OAAzB;AACA,SAASC,OAAT,QAAwB,iBAAxB;AACA,SAASC,SAAT,QAA0B,8BAA1B;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,SAASC,YAAT,QAA6B,oBAA7B;AACA,SAASC,UAAT,QAA2B,8BAA3B;AAEA,IAAMC,SAAS,GAAGP,UAAU,CAAC,UAACQ,KAAD;AAAA,SAAY;AACxCC,IAAAA,MAAM,EAAE;AACPC,MAAAA,WAAW,EAAEF,KAAK,CAACG,OAAN,CAAc,CAAd,CADN;AAEPC,MAAAA,SAAS,EAAEJ,KAAK,CAACG,OAAN,CAAc,CAAd,CAFJ;AAGPE,MAAAA,KAAK,EAAE;AAHA,KADgC;AAMxCC,IAAAA,WAAW,EAAE;AACZC,MAAAA,MAAM,EAAEP,KAAK,CAACG,OAAN,CAAc,CAAd,CADI;AAEZE,MAAAA,KAAK,EAAE;AAFK,KAN2B;AAUxCG,IAAAA,SAAS,EAAE;AACVD,MAAAA,MAAM,EAAEP,KAAK,CAACG,OAAN,CAAc,CAAd,CADE;AAEVE,MAAAA,KAAK,EAAE;AAFG;AAV6B,GAAZ;AAAA,CAAD,CAA5B;;AAgBA,IAAMI,cAAc,GAAG,SAAjBA,cAAiB,OAA2C;AAAA;;AAAA,MAAxCC,mBAAwC,QAAxCA,mBAAwC;AAAA,MAAnBC,MAAmB,QAAnBA,MAAmB;AAAA,MAAXC,IAAW,QAAXA,IAAW;AACjE,MAAMC,KAAK,GAAGlB,SAAS,CAAC,OAAD,CAAvB;AACA,MAAMmB,OAAO,GAAGf,SAAS,EAAzB;;AAFiE,iBAG9BL,OAAO,CAAC;AAC1CqB,IAAAA,aAAa,kCAAOH,IAAP;AAAaI,MAAAA,QAAQ,EAAE;AAAvB;AAD6B,GAAD,CAHuB;AAAA,MAGzDC,QAHyD,YAGzDA,QAHyD;AAAA,MAG/CC,YAH+C,YAG/CA,YAH+C;;AAAA,kBAOnCzB,QAAQ,CAAC,KAAD,CAP2B;AAAA,MAO1D0B,OAP0D;AAAA,MAOjDC,UAPiD;;AASjE,MAAMC,QAAQ;AAAA,yEAAG,iBAAOC,IAAP;AAAA;AAAA;AAAA;AAAA;AAChBC,cAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACAF,cAAAA,UAAU,CAAC,IAAD,CAAV;AACAtB,cAAAA,UAAU,CAACwB,IAAD,EAAOT,KAAP,CAAV,CAAwBY,IAAxB,CAA6B,UAACC,MAAD,EAAY;AACxCH,gBAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBE,MAAtB;;AACA,oBAAIA,MAAM,CAACC,KAAX,EAAkB;AACjBP,kBAAAA,UAAU,CAAC,KAAD,CAAV;AACAV,kBAAAA,mBAAmB,WAAIgB,MAAM,CAACC,KAAX,EAAnB;AACA,iBAHD,MAGO;AACNP,kBAAAA,UAAU,CAAC,KAAD,CAAV;AACAV,kBAAAA,mBAAmB,WAAIgB,MAAM,CAACE,OAAX,GAAsB,SAAtB,CAAnB;AACAC,kBAAAA,UAAU,CAAC,YAAM;AAChBjC,oBAAAA,MAAM,CAACkC,IAAP,wBAA4BnB,MAAM,CAACoB,KAAP,CAAaC,EAAzC,GAA+C,IAA/C,EAAqD;AACpDC,sBAAAA,OAAO,EAAE;AAD2C,qBAArD;AAGA,mBAJS,EAIP,IAJO,CAAV;AAKA;AACD,eAdD;;AAHgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAARZ,QAAQ;AAAA;AAAA;AAAA,KAAd;;AAoBA,SACC,4BACEF,OAAO,IAAI,MAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADb,EAGC;AAAM,IAAA,QAAQ,EAAED,YAAY,CAACG,QAAD,CAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACC,MAAC,SAAD;AACC,IAAA,SAAS,EAAEP,OAAO,CAACN,SADpB;AAEC,IAAA,QAAQ,EAAES,QAFX;AAGC,IAAA,IAAI,EAAC,MAHN;AAIC,IAAA,EAAE,EAAC,iBAJJ;AAKC,IAAA,KAAK,EAAC,KALP;AAMC,IAAA,eAAe,EAAE;AAChBiB,MAAAA,MAAM,EAAE;AADQ,KANlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,EAWC,MAAC,SAAD;AACC,IAAA,SAAS,EAAEpB,OAAO,CAACN,SADpB;AAEC,IAAA,QAAQ,EAAES,QAFX;AAGC,IAAA,IAAI,EAAC,OAHN;AAIC,IAAA,IAAI,EAAC,MAJN;AAKC,IAAA,EAAE,EAAC,iBALJ;AAMC,IAAA,KAAK,EAAC,MANP;AAOC,IAAA,eAAe,EAAE;AAChBiB,MAAAA,MAAM,EAAE;AADQ,KAPlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAXD,EAsBC,MAAC,SAAD;AACC,IAAA,SAAS,EAAEpB,OAAO,CAACN,SADpB;AAEC,IAAA,QAAQ,EAAES,QAFX;AAGC,IAAA,IAAI,EAAC,UAHN;AAIC,IAAA,IAAI,EAAC,UAJN;AAKC,IAAA,EAAE,EAAC,iBALJ;AAMC,IAAA,KAAK,EAAC,cANP;AAOC,IAAA,eAAe,EAAE;AAChBiB,MAAAA,MAAM,EAAE;AADQ,KAPlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAtBD,EAkCC,MAAC,IAAD;AACC,IAAA,SAAS,MADV;AAEC,IAAA,SAAS,EAAC,KAFX;AAGC,IAAA,OAAO,EAAC,QAHT;AAIC,IAAA,UAAU,EAAC,QAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAKC,MAAC,gBAAD;AACC,IAAA,OAAO,EACN,MAAC,MAAD;AACC,MAAA,QAAQ,EAAEjB,QADX;AAEC,MAAA,IAAI,EAAC,SAFN;AAGC,MAAA,cAAc,MAHf;AAIC,MAAA,KAAK,EAAC,SAJP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF;AASC,IAAA,KAAK,EAAC,OATP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALD,CAlCD,EAmDC,MAAC,MAAD;AACC,IAAA,IAAI,EAAC,QADN;AAEC,IAAA,OAAO,EAAC,WAFT;AAGC,IAAA,KAAK,EAAC,SAHP;AAIC,IAAA,SAAS,EAAEH,OAAO,CAACb,MAJpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAnDD,CAHD,CADD;AAiEA,CA9FD;;GAAMQ,c;UAEWV,S,EACmBL,O;;;KAH9Be,c;AAgGN,qBAAelB,UAAU,OAACM,YAAY,CAACY,cAAD,CAAb,CAAzB","sourcesContent":["import {\r\n\tButton,\r\n\tCircularProgress,\r\n\tSwitch,\r\n\tFormControlLabel,\r\n\tTextField,\r\n\tGrid,\r\n} from '@material-ui/core';\r\nimport { withRouter } from 'next/router';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { getCookie } from '../../../actions/authActions';\r\nimport Router from 'next/router';\r\nimport { withSnackbar } from '../../HOC/Snackbar';\r\nimport { updateUser } from '../../../actions/userActions';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tbutton: {\r\n\t\tmarginRight: theme.spacing(1),\r\n\t\tmarginTop: theme.spacing(2),\r\n\t\twidth: '100%',\r\n\t},\r\n\tformControl: {\r\n\t\tmargin: theme.spacing(1),\r\n\t\twidth: '80%',\r\n\t},\r\n\ttextField: {\r\n\t\tmargin: theme.spacing(1),\r\n\t\twidth: '80%',\r\n\t},\r\n}));\r\n\r\nconst FormCreateUser = ({ snackbarShowMessage, router, user }) => {\r\n\tconst token = getCookie('token');\r\n\tconst classes = useStyles();\r\n\tconst { register, handleSubmit } = useForm({\r\n\t\tdefaultValues: { ...user, password: '' },\r\n\t});\r\n\r\n\tconst [loading, setLoading] = useState(false);\r\n\r\n\tconst onSubmit = async (data) => {\r\n\t\tconsole.log(data);\r\n\t\tsetLoading(true);\r\n\t\tupdateUser(data, token).then((result) => {\r\n\t\t\tconsole.log('result', result);\r\n\t\t\tif (result.error) {\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t\tsnackbarShowMessage(`${result.error}`);\r\n\t\t\t} else {\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t\tsnackbarShowMessage(`${result.message}`, 'success');\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tRouter.push(`/admin/users/${router.query.id}`, null, {\r\n\t\t\t\t\t\tshallow: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t}, 3000);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{loading && <CircularProgress />}\r\n\r\n\t\t\t<form onSubmit={handleSubmit(onSubmit)}>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tclassName={classes.textField}\r\n\t\t\t\t\tinputRef={register}\r\n\t\t\t\t\tname='name'\r\n\t\t\t\t\tid='standard-number'\r\n\t\t\t\t\tlabel='Nom'\r\n\t\t\t\t\tInputLabelProps={{\r\n\t\t\t\t\t\tshrink: true,\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tclassName={classes.textField}\r\n\t\t\t\t\tinputRef={register}\r\n\t\t\t\t\tname='email'\r\n\t\t\t\t\ttype='mail'\r\n\t\t\t\t\tid='standard-number'\r\n\t\t\t\t\tlabel='Mail'\r\n\t\t\t\t\tInputLabelProps={{\r\n\t\t\t\t\t\tshrink: true,\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tclassName={classes.textField}\r\n\t\t\t\t\tinputRef={register}\r\n\t\t\t\t\tname='password'\r\n\t\t\t\t\ttype='password'\r\n\t\t\t\t\tid='standard-number'\r\n\t\t\t\t\tlabel='Mot de passe'\r\n\t\t\t\t\tInputLabelProps={{\r\n\t\t\t\t\t\tshrink: true,\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<Grid\r\n\t\t\t\t\tcontainer\r\n\t\t\t\t\tdirection='row'\r\n\t\t\t\t\tjustify='center'\r\n\t\t\t\t\talignItems='center'>\r\n\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\tcontrol={\r\n\t\t\t\t\t\t\t<Switch\r\n\t\t\t\t\t\t\t\tinputRef={register}\r\n\t\t\t\t\t\t\t\tname='isAdmin'\r\n\t\t\t\t\t\t\t\tdefaultChecked\r\n\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlabel='Admin'\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Button\r\n\t\t\t\t\ttype='submit'\r\n\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\tclassName={classes.button}>\r\n\t\t\t\t\tModifier cet utilisateur\r\n\t\t\t\t</Button>\r\n\t\t\t</form>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default withRouter(withSnackbar(FormCreateUser));\r\n"]},"metadata":{},"sourceType":"module"}