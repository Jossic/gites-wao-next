{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\gites\\\\Dropbox\\\\gites-wao\\\\frontend\\\\pages\\\\admin\\\\gites\\\\[id].js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport AdminHeader from '../../../components/layout/AdminHeader';\nimport Admin from '../../../components/auth/Admin';\nimport { withRouter } from 'next/router';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useForm } from 'react-hook-form';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Typography from '@material-ui/core/Typography';\nimport Box from '@material-ui/core/Box';\nimport { Grid, Paper, Button, ButtonGroup } from '@material-ui/core';\nimport { useState } from 'react';\nimport PictureInPictureAltIcon from '@material-ui/icons/PictureInPictureAlt';\nimport StarsIcon from '@material-ui/icons/Stars';\nimport MonetizationOnIcon from '@material-ui/icons/MonetizationOn';\nimport Link from 'next/link';\nimport { withSnackbar } from '../../../components/HOC/Snackbar';\nimport PageviewIcon from '@material-ui/icons/Pageview';\nimport { updateGite } from '../../../actions/giteActions';\nimport FormInfosGeneUpdate from '../../../components/admin/forms/gites/FormInfosGeneUpdate';\nimport FormInfosDiversesUpdate from '../../../components/admin/forms/gites/FormInfosDiversesUpdate';\nimport FormInfosPratiquesUpdate from '../../../components/admin/forms/gites/FormInfosPratiquesUpdate';\nimport FormInfosPagesUpdate from '../../../components/admin/forms/gites/FormInfosPagesUpdate';\nimport { getCookie } from '../../../actions/authActions';\nimport Router from 'next/router';\n\nfunction TabPanel(_ref) {\n  var children = _ref.children,\n      value = _ref.value,\n      index = _ref.index,\n      other = _objectWithoutProperties(_ref, [\"children\", \"value\", \"index\"]);\n\n  return __jsx(\"div\", _extends({\n    role: \"tabpanel\",\n    hidden: value !== index,\n    id: \"scrollable-prevent-tabpanel-\".concat(index),\n    \"aria-labelledby\": \"scrollable-prevent-tab-\".concat(index)\n  }, other, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 3\n    }\n  }), value === index && __jsx(Box, {\n    p: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 5\n    }\n  }, __jsx(Typography, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 6\n    }\n  }, children)));\n}\n\n_c = TabPanel;\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.any.isRequired,\n  value: PropTypes.any.isRequired\n};\n\nfunction a11yProps(index) {\n  return {\n    id: \"scrollable-prevent-tab-\".concat(index),\n    'aria-controls': \"scrollable-prevent-tabpanel-\".concat(index)\n  };\n}\n\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      flexGrow: 1,\n      width: '100%',\n      backgroundColor: '#585858',\n      minHeight: '50vh'\n    },\n    button: {\n      marginRight: theme.spacing(1),\n      marginTop: theme.spacing(2),\n      width: '100%'\n    },\n    instructions: {\n      marginTop: theme.spacing(1),\n      marginBottom: theme.spacing(1)\n    },\n    formControl: {\n      margin: theme.spacing(1),\n      minWidth: '100%'\n    },\n    selectEmpty: {\n      marginTop: theme.spacing(2)\n    },\n    textField: {\n      margin: theme.spacing(1),\n      width: '100%'\n    }\n  };\n});\n\nvar GiteId = function GiteId(_ref2) {\n  _s();\n\n  var gite = _ref2.gite,\n      router = _ref2.router,\n      snackbarShowMessage = _ref2.snackbarShowMessage;\n  var classes = useStyles();\n\n  var _useState = useState(0),\n      value = _useState[0],\n      setValue = _useState[1];\n\n  var token = getCookie('token');\n\n  var _useState2 = useState(false),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useForm = useForm({\n    defaultValues: gite\n  }),\n      control = _useForm.control,\n      register = _useForm.register,\n      handleSubmit = _useForm.handleSubmit;\n\n  var handleChange = function handleChange(event, newValue) {\n    setValue(newValue);\n  };\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(data) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              console.log(data);\n              setLoading(true);\n              updateGite(data, router.query.id, token).then(function (result) {\n                console.log('result', result);\n\n                if (result.error) {\n                  setLoading(false);\n                  snackbarShowMessage(\"\".concat(result.error));\n                } else {\n                  setLoading(false);\n                  snackbarShowMessage(\"\".concat(result.message), 'success');\n                  setTimeout(function () {\n                    Router.reload();\n                  }, 3000);\n                }\n              });\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onSubmit(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(React.Fragment, null, __jsx(AdminHeader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 4\n    }\n  }, __jsx(Admin, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 5\n    }\n  }, __jsx(Grid, {\n    container: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 6\n    }\n  }, __jsx(Grid, {\n    item: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }\n  }, __jsx(Typography, {\n    variant: \"h5\",\n    style: {\n      margin: '10px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 8\n    }\n  }, \"Gestion du g\\xEEte \", gite.nom, __jsx(Typography, {\n    style: {\n      color: 'red'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  }, \"#\", gite._id)))), __jsx(Grid, {\n    container: true,\n    direction: \"row\",\n    justify: \"space-between\",\n    alignItems: \"flex-start\",\n    style: {\n      padding: '8px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 6\n    }\n  }, __jsx(Grid, {\n    item: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }\n  }, __jsx(ButtonGroup, {\n    variant: \"contained\",\n    color: \"secondary\",\n    \"aria-label\": \"contained primary button group\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 8\n    }\n  }, __jsx(Button, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }\n  }, \"Bouton\"), __jsx(Button, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 9\n    }\n  }, \"Bouton\"), __jsx(Button, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 9\n    }\n  }, \"Bouton\"))), __jsx(Grid, {\n    item: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }\n  }, __jsx(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 8\n    }\n  }, __jsx(Link, {\n    href: \"/admin/gites\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 9\n    }\n  }, __jsx(\"a\", {\n    style: {\n      textDecoration: 'none',\n      color: 'white'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 10\n    }\n  }, \"Retour\"))))), __jsx(Paper, {\n    style: {\n      padding: '15px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 6\n    }\n  }, __jsx(Grid, {\n    container: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }\n  }, __jsx(Typography, {\n    variant: \"h4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 8\n    }\n  }, \"Informations\")), __jsx(\"div\", {\n    className: classes.root,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }\n  }, __jsx(AppBar, {\n    position: \"static\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 8\n    }\n  }, __jsx(Tabs, {\n    value: value,\n    onChange: handleChange,\n    variant: \"fullWidth\",\n    scrollButtons: \"off\",\n    \"aria-label\": \"user\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 9\n    }\n  }, __jsx(Tab, _extends({\n    icon: __jsx(StarsIcon, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 17\n      }\n    }),\n    \"aria-label\": \"Infos g\\xE9n\\xE9rales\"\n  }, a11yProps(0), {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 10\n    }\n  })), __jsx(Tab, _extends({\n    icon: __jsx(PictureInPictureAltIcon, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 17\n      }\n    }),\n    \"aria-label\": \"Infos diverses\"\n  }, a11yProps(1), {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 10\n    }\n  })), __jsx(Tab, _extends({\n    icon: __jsx(MonetizationOnIcon, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 17\n      }\n    }),\n    \"aria-label\": \"Infos pratiques/tarifs\"\n  }, a11yProps(2), {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 10\n    }\n  })), __jsx(Tab, _extends({\n    icon: __jsx(PageviewIcon, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 17\n      }\n    }),\n    \"aria-label\": \"Infos pages/SEO\"\n  }, a11yProps(3), {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 10\n    }\n  })))), __jsx(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 8\n    }\n  }, __jsx(TabPanel, {\n    value: value,\n    index: 0,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 9\n    }\n  }, __jsx(FormInfosGeneUpdate, {\n    classes: classes,\n    preloadedValues: gite,\n    register: register,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 10\n    }\n  })), __jsx(TabPanel, {\n    value: value,\n    index: 1,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 9\n    }\n  }, __jsx(FormInfosDiversesUpdate, {\n    classes: classes,\n    preloadedValues: gite,\n    register: register,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 10\n    }\n  })), __jsx(TabPanel, {\n    value: value,\n    index: 2,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 9\n    }\n  }, __jsx(FormInfosPratiquesUpdate, {\n    classes: classes,\n    preloadedValues: gite,\n    register: register,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 10\n    }\n  })), __jsx(TabPanel, {\n    value: value,\n    index: 3,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 9\n    }\n  }, __jsx(FormInfosPagesUpdate, {\n    classes: classes,\n    preloadedValues: gite,\n    register: register,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 10\n    }\n  }))))))));\n};\n\n_s(GiteId, \"crfgfJu39UdAVYhPngChq18s3m0=\", false, function () {\n  return [useStyles, useForm];\n});\n\n_c2 = GiteId;\nexport var __N_SSP = true;\nexport default _c4 = withRouter(_c3 = withSnackbar(GiteId));\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"TabPanel\");\n$RefreshReg$(_c2, \"GiteId\");\n$RefreshReg$(_c3, \"%default%$withRouter\");\n$RefreshReg$(_c4, \"%default%\");","map":{"version":3,"sources":["C:/Users/gites/Dropbox/gites-wao/frontend/pages/admin/gites/[id].js"],"names":["AdminHeader","Admin","withRouter","PropTypes","makeStyles","useForm","AppBar","Tabs","Tab","Typography","Box","Grid","Paper","Button","ButtonGroup","useState","PictureInPictureAltIcon","StarsIcon","MonetizationOnIcon","Link","withSnackbar","PageviewIcon","updateGite","FormInfosGeneUpdate","FormInfosDiversesUpdate","FormInfosPratiquesUpdate","FormInfosPagesUpdate","getCookie","Router","TabPanel","children","value","index","other","propTypes","node","any","isRequired","a11yProps","id","useStyles","theme","root","flexGrow","width","backgroundColor","minHeight","button","marginRight","spacing","marginTop","instructions","marginBottom","formControl","margin","minWidth","selectEmpty","textField","GiteId","gite","router","snackbarShowMessage","classes","setValue","token","loading","setLoading","defaultValues","control","register","handleSubmit","handleChange","event","newValue","onSubmit","data","console","log","query","then","result","error","message","setTimeout","reload","nom","color","_id","padding","textDecoration"],"mappings":"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","sourcesContent":["import AdminHeader from '../../../components/layout/AdminHeader';\r\nimport Admin from '../../../components/auth/Admin';\r\nimport { withRouter } from 'next/router';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useForm } from 'react-hook-form';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\nimport { Grid, Paper, Button, ButtonGroup } from '@material-ui/core';\r\nimport { useState } from 'react';\r\nimport PictureInPictureAltIcon from '@material-ui/icons/PictureInPictureAlt';\r\nimport StarsIcon from '@material-ui/icons/Stars';\r\nimport MonetizationOnIcon from '@material-ui/icons/MonetizationOn';\r\nimport Link from 'next/link';\r\nimport { withSnackbar } from '../../../components/HOC/Snackbar';\r\nimport PageviewIcon from '@material-ui/icons/Pageview';\r\nimport { listGiteById, updateGite } from '../../../actions/giteActions';\r\nimport FormInfosGeneUpdate from '../../../components/admin/forms/gites/FormInfosGeneUpdate';\r\nimport FormInfosDiversesUpdate from '../../../components/admin/forms/gites/FormInfosDiversesUpdate';\r\nimport FormInfosPratiquesUpdate from '../../../components/admin/forms/gites/FormInfosPratiquesUpdate';\r\nimport FormInfosPagesUpdate from '../../../components/admin/forms/gites/FormInfosPagesUpdate';\r\nimport { getCookie } from '../../../actions/authActions';\r\nimport Router from 'next/router';\r\n\r\nfunction TabPanel({ children, value, index, ...other }) {\r\n\treturn (\r\n\t\t<div\r\n\t\t\trole='tabpanel'\r\n\t\t\thidden={value !== index}\r\n\t\t\tid={`scrollable-prevent-tabpanel-${index}`}\r\n\t\t\taria-labelledby={`scrollable-prevent-tab-${index}`}\r\n\t\t\t{...other}>\r\n\t\t\t{value === index && (\r\n\t\t\t\t<Box p={3}>\r\n\t\t\t\t\t<Typography>{children}</Typography>\r\n\t\t\t\t</Box>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nTabPanel.propTypes = {\r\n\tchildren: PropTypes.node,\r\n\tindex: PropTypes.any.isRequired,\r\n\tvalue: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n\treturn {\r\n\t\tid: `scrollable-prevent-tab-${index}`,\r\n\t\t'aria-controls': `scrollable-prevent-tabpanel-${index}`,\r\n\t};\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\tflexGrow: 1,\r\n\t\twidth: '100%',\r\n\t\tbackgroundColor: '#585858',\r\n\t\tminHeight: '50vh',\r\n\t},\r\n\tbutton: {\r\n\t\tmarginRight: theme.spacing(1),\r\n\t\tmarginTop: theme.spacing(2),\r\n\t\twidth: '100%',\r\n\t},\r\n\tinstructions: {\r\n\t\tmarginTop: theme.spacing(1),\r\n\t\tmarginBottom: theme.spacing(1),\r\n\t},\r\n\tformControl: {\r\n\t\tmargin: theme.spacing(1),\r\n\t\tminWidth: '100%',\r\n\t},\r\n\tselectEmpty: {\r\n\t\tmarginTop: theme.spacing(2),\r\n\t},\r\n\ttextField: {\r\n\t\tmargin: theme.spacing(1),\r\n\t\twidth: '100%',\r\n\t},\r\n}));\r\n\r\nconst GiteId = ({ gite, router, snackbarShowMessage }) => {\r\n\tconst classes = useStyles();\r\n\tconst [value, setValue] = useState(0);\r\n\tconst token = getCookie('token');\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst { control, register, handleSubmit } = useForm({\r\n\t\tdefaultValues: gite,\r\n\t});\r\n\tconst handleChange = (event, newValue) => {\r\n\t\tsetValue(newValue);\r\n\t};\r\n\r\n\tconst onSubmit = async (data) => {\r\n\t\tconsole.log(data);\r\n\t\tsetLoading(true);\r\n\t\tupdateGite(data, router.query.id, token).then((result) => {\r\n\t\t\tconsole.log('result', result);\r\n\t\t\tif (result.error) {\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t\tsnackbarShowMessage(`${result.error}`);\r\n\t\t\t} else {\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t\tsnackbarShowMessage(`${result.message}`, 'success');\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tRouter.reload();\r\n\t\t\t\t}, 3000);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<AdminHeader>\r\n\t\t\t\t<Admin>\r\n\t\t\t\t\t{/* Fil d'ariane */}\r\n\t\t\t\t\t<Grid container>\r\n\t\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t\t<Typography variant='h5' style={{ margin: '10px' }}>\r\n\t\t\t\t\t\t\t\tGestion du gîte {gite.nom}\r\n\t\t\t\t\t\t\t\t<Typography style={{ color: 'red' }}>\r\n\t\t\t\t\t\t\t\t\t#{gite._id}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid\r\n\t\t\t\t\t\tcontainer\r\n\t\t\t\t\t\tdirection='row'\r\n\t\t\t\t\t\tjustify='space-between'\r\n\t\t\t\t\t\talignItems='flex-start'\r\n\t\t\t\t\t\tstyle={{ padding: '8px' }}>\r\n\t\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t\t<ButtonGroup\r\n\t\t\t\t\t\t\t\tvariant='contained'\r\n\t\t\t\t\t\t\t\tcolor='secondary'\r\n\t\t\t\t\t\t\t\taria-label='contained primary button group'>\r\n\t\t\t\t\t\t\t\t<Button>Bouton</Button>\r\n\t\t\t\t\t\t\t\t<Button>Bouton</Button>\r\n\t\t\t\t\t\t\t\t<Button>Bouton</Button>\r\n\t\t\t\t\t\t\t</ButtonGroup>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t\t<Button variant='contained' color='primary'>\r\n\t\t\t\t\t\t\t\t<Link href='/admin/gites'>\r\n\t\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\ttextDecoration: 'none',\r\n\t\t\t\t\t\t\t\t\t\t\tcolor: 'white',\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\tRetour\r\n\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Paper style={{ padding: '15px' }}>\r\n\t\t\t\t\t\t<Grid container>\r\n\t\t\t\t\t\t\t<Typography variant='h4'>Informations</Typography>\r\n\t\t\t\t\t\t</Grid>\r\n\r\n\t\t\t\t\t\t<div className={classes.root}>\r\n\t\t\t\t\t\t\t<AppBar position='static'>\r\n\t\t\t\t\t\t\t\t<Tabs\r\n\t\t\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t\t\tvariant='fullWidth'\r\n\t\t\t\t\t\t\t\t\tscrollButtons='off'\r\n\t\t\t\t\t\t\t\t\taria-label='user'>\r\n\t\t\t\t\t\t\t\t\t<Tab\r\n\t\t\t\t\t\t\t\t\t\ticon={<StarsIcon />}\r\n\t\t\t\t\t\t\t\t\t\taria-label='Infos générales'\r\n\t\t\t\t\t\t\t\t\t\t{...a11yProps(0)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<Tab\r\n\t\t\t\t\t\t\t\t\t\ticon={<PictureInPictureAltIcon />}\r\n\t\t\t\t\t\t\t\t\t\taria-label='Infos diverses'\r\n\t\t\t\t\t\t\t\t\t\t{...a11yProps(1)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<Tab\r\n\t\t\t\t\t\t\t\t\t\ticon={<MonetizationOnIcon />}\r\n\t\t\t\t\t\t\t\t\t\taria-label='Infos pratiques/tarifs'\r\n\t\t\t\t\t\t\t\t\t\t{...a11yProps(2)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<Tab\r\n\t\t\t\t\t\t\t\t\t\ticon={<PageviewIcon />}\r\n\t\t\t\t\t\t\t\t\t\taria-label='Infos pages/SEO'\r\n\t\t\t\t\t\t\t\t\t\t{...a11yProps(3)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t{/* <Tab\r\n\t\t\t\t\t\t\t\t\t\ticon={<PageviewIcon />}\r\n\t\t\t\t\t\t\t\t\t\taria-label='Infos pages/SEO'\r\n\t\t\t\t\t\t\t\t\t\t{...a11yProps(2)}\r\n\t\t\t\t\t\t\t\t\t/> */}\r\n\t\t\t\t\t\t\t\t</Tabs>\r\n\t\t\t\t\t\t\t</AppBar>\r\n\t\t\t\t\t\t\t<form onSubmit={handleSubmit(onSubmit)}>\r\n\t\t\t\t\t\t\t\t<TabPanel value={value} index={0}>\r\n\t\t\t\t\t\t\t\t\t<FormInfosGeneUpdate\r\n\t\t\t\t\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\t\t\t\t\tpreloadedValues={gite}\r\n\t\t\t\t\t\t\t\t\t\tregister={register}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</TabPanel>\r\n\t\t\t\t\t\t\t\t<TabPanel value={value} index={1}>\r\n\t\t\t\t\t\t\t\t\t<FormInfosDiversesUpdate\r\n\t\t\t\t\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\t\t\t\t\tpreloadedValues={gite}\r\n\t\t\t\t\t\t\t\t\t\tregister={register}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</TabPanel>\r\n\t\t\t\t\t\t\t\t<TabPanel value={value} index={2}>\r\n\t\t\t\t\t\t\t\t\t<FormInfosPratiquesUpdate\r\n\t\t\t\t\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\t\t\t\t\tpreloadedValues={gite}\r\n\t\t\t\t\t\t\t\t\t\tregister={register}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</TabPanel>\r\n\t\t\t\t\t\t\t\t<TabPanel value={value} index={3}>\r\n\t\t\t\t\t\t\t\t\t<FormInfosPagesUpdate\r\n\t\t\t\t\t\t\t\t\t\tclasses={classes}\r\n\t\t\t\t\t\t\t\t\t\tpreloadedValues={gite}\r\n\t\t\t\t\t\t\t\t\t\tregister={register}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</TabPanel>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Paper>\r\n\t\t\t\t</Admin>\r\n\t\t\t</AdminHeader>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport async function getServerSideProps(context) {\r\n\tconst res1 = await listGiteById(context.params.id);\r\n\tconst gite = await res1;\r\n\r\n\treturn {\r\n\t\tprops: {\r\n\t\t\tgite,\r\n\t\t},\r\n\t};\r\n}\r\n\r\nexport default withRouter(withSnackbar(GiteId));\r\n"]},"metadata":{},"sourceType":"module"}