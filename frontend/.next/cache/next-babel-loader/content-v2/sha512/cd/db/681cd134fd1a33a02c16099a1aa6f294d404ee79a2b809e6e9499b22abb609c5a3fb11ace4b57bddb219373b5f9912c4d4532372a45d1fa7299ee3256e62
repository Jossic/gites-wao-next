{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\jossi\\\\Dropbox\\\\JOSSIC\\\\6-development\\\\Devs\\\\gites-wao\\\\frontend\\\\pages\\\\admin\\\\messages\\\\[id].js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport AdminHeader from '../../../components/layout/AdminHeader';\nimport Admin from '../../../components/auth/Admin';\nimport dayjs from 'dayjs';\nimport { setVu } from '../../../actions/messageActions';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Divider from '@material-ui/core/Divider';\nimport IconButton from '@material-ui/core/IconButton';\nimport SendIcon from '@material-ui/icons/Send';\nimport TextareaAutosize from '@material-ui/core/TextareaAutosize';\nimport { useEffect } from 'react';\nimport { getCookie } from '../../../actions/authActions';\nimport { withRouter } from 'next/router';\nimport BackspaceIcon from '@material-ui/icons/Backspace';\nimport Link from 'next/link';\nimport { useForm } from 'react-hook-form';\nvar useStyles = makeStyles(function (darkTheme) {\n  return {\n    root: {\n      minWidth: 275\n    },\n    rootPaper: {\n      padding: '6px 4px',\n      display: 'flex',\n      alignItems: 'center',\n      width: '100%',\n      backgroundColor: '#212529'\n    },\n    bullet: {\n      display: 'inline-block',\n      margin: '0 2px',\n      transform: 'scale(0.8)'\n    },\n    title: {\n      fontSize: 14\n    },\n    pos: {\n      marginBottom: 12\n    },\n    iconButton: {\n      padding: 10\n    },\n    input: {\n      marginLeft: darkTheme.spacing(1),\n      flex: 1\n    },\n    divider: {\n      height: 28,\n      margin: 4\n    }\n  };\n});\n\nvar MessageId = function MessageId(_ref) {\n  _s();\n\n  var message = _ref.message,\n      router = _ref.router;\n  var classes = useStyles();\n  var token = getCookie('token');\n\n  var _useForm = useForm(),\n      register = _useForm.register,\n      handleSubmit = _useForm.handleSubmit;\n\n  var _useState = useState({\n    loading: false,\n    success: '',\n    error: '',\n    message: ''\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      values = _useState2[0],\n      setValues = _useState2[1];\n\n  var question = values.question,\n      reponse = values.reponse,\n      success = values.success,\n      loading = values.loading,\n      error = values.error; //Envoyer la réponse\n  //UseEffect mettant vu à true au chargement de la page\n  //Afficher la réponse en dessous du message\n\n  useEffect(function () {\n    setVu(router.query.id, token);\n  }, []);\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(data) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setValues(_objectSpread(_objectSpread({}, values), {}, {\n                loading: true\n              }));\n              console.log('data vaut =>', data);\n              createReview(data, token).then(function (result) {\n                console.log('result vaut =>', result);\n\n                if (result.error) {\n                  console.log('une grosse erreur');\n                  setValues(_objectSpread(_objectSpread({}, values), {}, {\n                    error: result.error\n                  }));\n                } else {\n                  setValues(_objectSpread(_objectSpread({}, values), {}, {\n                    client: '',\n                    note: '',\n                    commentaire: '',\n                    giteConcerne: '',\n                    success: true,\n                    loading: false\n                  }));\n                  setTimeout(function () {\n                    Router.push('/admin/gestionReviews');\n                  }, 3000);\n                }\n              });\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onSubmit(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(React.Fragment, null, __jsx(AdminHeader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 4\n    }\n  }, __jsx(Admin, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 5\n    }\n  }, __jsx(\"h2\", {\n    style: {\n      color: 'white'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 6\n    }\n  }, \"Consultation du message de \", message.nom), __jsx(Link, {\n    href: \"/admin/messages\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 6\n    }\n  }, __jsx(\"a\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }\n  }, __jsx(BackspaceIcon, {\n    fontSize: \"large\",\n    style: {\n      \"float\": 'right',\n      position: 'relative'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 8\n    }\n  }))), __jsx(\"hr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 6\n    }\n  }), __jsx(Card, {\n    className: classes.root,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 6\n    }\n  }, __jsx(CardContent, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }\n  }, __jsx(Typography, {\n    variant: \"h5\",\n    component: \"h5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 8\n    }\n  }, \"Envoy\\xE9 par \", message.nom), __jsx(Typography, {\n    className: classes.title,\n    color: \"textSecondary\",\n    gutterBottom: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 8\n    }\n  }, \"le\", ' ', dayjs(message.createdAt).format('DD/MM/YYYY à HH:mm')), __jsx(Typography, {\n    className: classes.pos,\n    color: \"textSecondary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 8\n    }\n  }, \"Coordonn\\xE9es :\", ' ', __jsx(\"a\", {\n    href: \"mailto:\".concat(message.mail),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }\n  }, message.mail), ' ', \"/ 0\", \"\".concat(message.tel.toString().substring(0, 1), \" \").concat(message.tel.toString().substring(1, 3), \" \").concat(message.tel.toString().substring(3, 5), \" \").concat(message.tel.toString().substring(5, 7), \" \").concat(message.tel.toString().substring(7, 9))), __jsx(Typography, {\n    variant: \"body2\",\n    component: \"p\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 8\n    }\n  }, \"Message :\", __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 9\n    }\n  }), message.msg)), __jsx(CardContent, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }\n  }, __jsx(Paper, {\n    component: \"form\",\n    className: classes.rootPaper,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 8\n    }\n  }, __jsx(\"form\", {\n    className: classes.rootPaper,\n    onSubmit: handleSubmit(onSubmit),\n    autoComplete: \"off\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 9\n    }\n  }, __jsx(TextareaAutosize, {\n    style: {\n      width: '100%'\n    },\n    \"aria-label\": \"reponse\",\n    placeholder: \"R\\xE9ponse\",\n    rowsMin: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 10\n    }\n  }), __jsx(Divider, {\n    className: classes.divider,\n    orientation: \"vertical\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 10\n    }\n  }), __jsx(IconButton, {\n    type: \"submit\",\n    color: \"primary\",\n    className: classes.iconButton,\n    \"aria-label\": \"Envoyer\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 10\n    }\n  }, __jsx(SendIcon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 11\n    }\n  })))))))));\n};\n\n_s(MessageId, \"uvkJHolt9gAUi0e0sALrQB/T5Cs=\", false, function () {\n  return [useStyles, useForm];\n});\n\n_c = MessageId;\nexport var __N_SSP = true;\nexport default _c2 = withRouter(MessageId);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"MessageId\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["C:/Users/jossi/Dropbox/JOSSIC/6-development/Devs/gites-wao/frontend/pages/admin/messages/[id].js"],"names":["AdminHeader","Admin","dayjs","setVu","makeStyles","Card","CardContent","Paper","Typography","Divider","IconButton","SendIcon","TextareaAutosize","useEffect","getCookie","withRouter","BackspaceIcon","Link","useForm","useStyles","darkTheme","root","minWidth","rootPaper","padding","display","alignItems","width","backgroundColor","bullet","margin","transform","title","fontSize","pos","marginBottom","iconButton","input","marginLeft","spacing","flex","divider","height","MessageId","message","router","classes","token","register","handleSubmit","useState","loading","success","error","values","setValues","question","reponse","query","id","onSubmit","data","console","log","createReview","then","result","client","note","commentaire","giteConcerne","setTimeout","Router","push","color","nom","position","createdAt","format","mail","tel","toString","substring","msg"],"mappings":"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","sourcesContent":["import AdminHeader from '../../../components/layout/AdminHeader';\r\nimport Admin from '../../../components/auth/Admin';\r\nimport dayjs from 'dayjs';\r\nimport { listMessageById, setVu } from '../../../actions/messageActions';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport TextareaAutosize from '@material-ui/core/TextareaAutosize';\r\nimport { useEffect } from 'react';\r\nimport { getCookie } from '../../../actions/authActions';\r\nimport { withRouter } from 'next/router';\r\nimport BackspaceIcon from '@material-ui/icons/Backspace';\r\nimport Link from 'next/link';\r\nimport { useForm } from 'react-hook-form';\r\n\r\nconst useStyles = makeStyles((darkTheme) => ({\r\n\troot: {\r\n\t\tminWidth: 275,\r\n\t},\r\n\trootPaper: {\r\n\t\tpadding: '6px 4px',\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t\twidth: '100%',\r\n\t\tbackgroundColor: '#212529',\r\n\t},\r\n\tbullet: {\r\n\t\tdisplay: 'inline-block',\r\n\t\tmargin: '0 2px',\r\n\t\ttransform: 'scale(0.8)',\r\n\t},\r\n\ttitle: {\r\n\t\tfontSize: 14,\r\n\t},\r\n\tpos: {\r\n\t\tmarginBottom: 12,\r\n\t},\r\n\ticonButton: {\r\n\t\tpadding: 10,\r\n\t},\r\n\tinput: {\r\n\t\tmarginLeft: darkTheme.spacing(1),\r\n\t\tflex: 1,\r\n\t},\r\n\tdivider: {\r\n\t\theight: 28,\r\n\t\tmargin: 4,\r\n\t},\r\n}));\r\n\r\nconst MessageId = ({ message, router }) => {\r\n\tconst classes = useStyles();\r\n\tconst token = getCookie('token');\r\n\tconst { register, handleSubmit } = useForm();\r\n\r\n\tconst [values, setValues] = useState({\r\n\t\tloading: false,\r\n\t\tsuccess: '',\r\n\t\terror: '',\r\n\t\tmessage: '',\r\n\t});\r\n\tconst { question, reponse, success, loading, error } = values;\r\n\t//Envoyer la réponse\r\n\t//UseEffect mettant vu à true au chargement de la page\r\n\t//Afficher la réponse en dessous du message\r\n\r\n\tuseEffect(() => {\r\n\t\tsetVu(router.query.id, token);\r\n\t}, []);\r\n\r\n\tconst onSubmit = async (data) => {\r\n\t\tsetValues({ ...values, loading: true });\r\n\t\tconsole.log('data vaut =>', data);\r\n\t\tcreateReview(data, token).then((result) => {\r\n\t\t\tconsole.log('result vaut =>', result);\r\n\t\t\tif (result.error) {\r\n\t\t\t\tconsole.log('une grosse erreur');\r\n\t\t\t\tsetValues({ ...values, error: result.error });\r\n\t\t\t} else {\r\n\t\t\t\tsetValues({\r\n\t\t\t\t\t...values,\r\n\t\t\t\t\tclient: '',\r\n\t\t\t\t\tnote: '',\r\n\t\t\t\t\tcommentaire: '',\r\n\t\t\t\t\tgiteConcerne: '',\r\n\t\t\t\t\tsuccess: true,\r\n\t\t\t\t\tloading: false,\r\n\t\t\t\t});\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tRouter.push('/admin/gestionReviews');\r\n\t\t\t\t}, 3000);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<AdminHeader>\r\n\t\t\t\t<Admin>\r\n\t\t\t\t\t{/* Fil d'ariane */}\r\n\t\t\t\t\t<h2 style={{ color: 'white' }}>\r\n\t\t\t\t\t\tConsultation du message de {message.nom}\r\n\t\t\t\t\t</h2>\r\n\t\t\t\t\t<Link href='/admin/messages'>\r\n\t\t\t\t\t\t<a>\r\n\t\t\t\t\t\t\t<BackspaceIcon\r\n\t\t\t\t\t\t\t\tfontSize='large'\r\n\t\t\t\t\t\t\t\tstyle={{ float: 'right', position: 'relative' }}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t\t<hr />\r\n\t\t\t\t\t<Card className={classes.root}>\r\n\t\t\t\t\t\t<CardContent>\r\n\t\t\t\t\t\t\t<Typography variant='h5' component='h5'>\r\n\t\t\t\t\t\t\t\tEnvoyé par {message.nom}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography\r\n\t\t\t\t\t\t\t\tclassName={classes.title}\r\n\t\t\t\t\t\t\t\tcolor='textSecondary'\r\n\t\t\t\t\t\t\t\tgutterBottom>\r\n\t\t\t\t\t\t\t\tle{' '}\r\n\t\t\t\t\t\t\t\t{dayjs(message.createdAt).format(\r\n\t\t\t\t\t\t\t\t\t'DD/MM/YYYY à HH:mm'\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Typography>\r\n\r\n\t\t\t\t\t\t\t<Typography\r\n\t\t\t\t\t\t\t\tclassName={classes.pos}\r\n\t\t\t\t\t\t\t\tcolor='textSecondary'>\r\n\t\t\t\t\t\t\t\tCoordonnées :{' '}\r\n\t\t\t\t\t\t\t\t<a href={`mailto:${message.mail}`}>\r\n\t\t\t\t\t\t\t\t\t{message.mail}\r\n\t\t\t\t\t\t\t\t</a>{' '}\r\n\t\t\t\t\t\t\t\t/ 0\r\n\t\t\t\t\t\t\t\t{`${message.tel\r\n\t\t\t\t\t\t\t\t\t.toString()\r\n\t\t\t\t\t\t\t\t\t.substring(\r\n\t\t\t\t\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t\t\t\t\t1\r\n\t\t\t\t\t\t\t\t\t)} ${message.tel\r\n\t\t\t\t\t\t\t\t\t.toString()\r\n\t\t\t\t\t\t\t\t\t.substring(\r\n\t\t\t\t\t\t\t\t\t\t1,\r\n\t\t\t\t\t\t\t\t\t\t3\r\n\t\t\t\t\t\t\t\t\t)} ${message.tel\r\n\t\t\t\t\t\t\t\t\t.toString()\r\n\t\t\t\t\t\t\t\t\t.substring(\r\n\t\t\t\t\t\t\t\t\t\t3,\r\n\t\t\t\t\t\t\t\t\t\t5\r\n\t\t\t\t\t\t\t\t\t)} ${message.tel\r\n\t\t\t\t\t\t\t\t\t.toString()\r\n\t\t\t\t\t\t\t\t\t.substring(\r\n\t\t\t\t\t\t\t\t\t\t5,\r\n\t\t\t\t\t\t\t\t\t\t7\r\n\t\t\t\t\t\t\t\t\t)} ${message.tel\r\n\t\t\t\t\t\t\t\t\t.toString()\r\n\t\t\t\t\t\t\t\t\t.substring(7, 9)}`}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography variant='body2' component='p'>\r\n\t\t\t\t\t\t\t\tMessage :\r\n\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t{message.msg}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</CardContent>\r\n\t\t\t\t\t\t<CardContent>\r\n\t\t\t\t\t\t\t<Paper\r\n\t\t\t\t\t\t\t\tcomponent='form'\r\n\t\t\t\t\t\t\t\tclassName={classes.rootPaper}>\r\n\t\t\t\t\t\t\t\t<form\r\n\t\t\t\t\t\t\t\t\tclassName={classes.rootPaper}\r\n\t\t\t\t\t\t\t\t\tonSubmit={handleSubmit(onSubmit)}\r\n\t\t\t\t\t\t\t\t\tautoComplete='off'>\r\n\t\t\t\t\t\t\t\t\t<TextareaAutosize\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ width: '100%' }}\r\n\t\t\t\t\t\t\t\t\t\taria-label='reponse'\r\n\t\t\t\t\t\t\t\t\t\tplaceholder='Réponse'\r\n\t\t\t\t\t\t\t\t\t\trowsMin={6}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<Divider\r\n\t\t\t\t\t\t\t\t\t\tclassName={classes.divider}\r\n\t\t\t\t\t\t\t\t\t\torientation='vertical'\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\ttype='submit'\r\n\t\t\t\t\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\t\t\t\t\tclassName={classes.iconButton}\r\n\t\t\t\t\t\t\t\t\t\taria-label='Envoyer'>\r\n\t\t\t\t\t\t\t\t\t\t<SendIcon />\r\n\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t</CardContent>\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t</Admin>\r\n\t\t\t</AdminHeader>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport async function getServerSideProps(context) {\r\n\tconst res1 = await listMessageById(context.params.id);\r\n\tconst message = await res1;\r\n\r\n\treturn {\r\n\t\tprops: {\r\n\t\t\tmessage,\r\n\t\t},\r\n\t};\r\n}\r\n\r\nexport default withRouter(MessageId);\r\n"]},"metadata":{},"sourceType":"module"}